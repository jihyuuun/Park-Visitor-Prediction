# Park-Visitor-Prediction
어린이대공원 입장객 수 예측 모델 비교

📅 **기간**: Mar 2025 – Jun 2025

## 📖 프로젝트 개요  

본 프로젝트는 **서울어린이대공원의 일별 입장객 수를 예측**할 수 있는 모델을 구축하는 것을 목적으로 하며, 2022년 1월부터 2024년 12월까지의 데이터를 기반으로 **시계열 기반 베이스라인 모델인 Naïve 및 Seasonal Naïve**와 **머신러닝 기반의 Random Forest 및 XGBoost 모델**을 비교 분석하였다.

## 🔍 프로젝트 필요성
- **계절적·기후적 요인에 따른 서울어린이대공원 방문자 수의 변동성**: 서울어린이대공원은 연중 다양한 계절적·기후적 요인에 따라 입장객 수가 뚜렷한 변동성을 보이며, 특히 방학과 주말에는 가족 단위 방문이 증가함
  <img width="583" height="453" alt="image" src="https://github.com/user-attachments/assets/bbe725bc-b00a-4b53-b84e-c54947f629c5" />
  <img width="530" height="413" alt="image" src="https://github.com/user-attachments/assets/9b1691e9-1ee0-430d-ad5d-9da2bd864d1e" />

- **정확한 입장객 수 예측으로 실질적 효용 제공 가능**: 공원 내 혼잡도는 방문객의 체류 만족도와 시설 운영 효율성에 영향을 미칠 수 있기 때문에 정확한 입장객 수 예측은 공원 운영 계획 수립, 인력 배치, 시설 관리 및 마케팅 전략 수립 등 여러 측면에서 실질적 효용을 제공할 수 있음

## 🛠 사용 기술 및 라이브러리
- **데이터 전처리**: NumPy, Pandas
- **데이터 분할**: Scikit-learn
- **모델 정의**: XGBoost, Scikit-learn Ensemble
- **하이퍼파라미터 최적화**: Optuna
- **모델 평가**: Scikit-learn
- **시각화**: Matplotlib

## 📂 프로젝트 구조  

```
├── data/                         # 데이터 저장 폴더
│   ├── after/                    # 전처리된 데이터
│   │   ├── 날씨.xlsx                                 # 날씨 데이터
│   │   ├── 미세먼지.xlsx                             # 미세먼지 데이터
│   │   ├── 방학.xlsx                                 # 방학 여부 데이터
│   │   ├── 서울대공원_날씨_미세먼지_입장객_병합.xlsx    # 날씨와 미세먼지 데이터
│   │   ├── 서울대공원_입장객.xlsx                     # 입장객 수 데이터
│   │   ├── 주말.xlsx                                 # 주말 여부 데이터
│   ├── before/                   # 원시 데이터
│   │   ├── weather_2022.xls                          # 2022년 날씨 데이터
│   │   ├── weather_2023.xls                          # 2023년 날씨 데이터
│   │   ├── weather_2024.xls                          # 2024년 날씨 데이터
│   │   ├── 미세먼지.xls                               # 미세먼지 데이터
│   │   ├── 서울대공원 입장객 정보_2022년.xlsx          # 2022년 입장객 수 데이터
│   │   ├── 서울대공원 입장객 정보_2023년.xlsx          # 2023년 입장객 수 데이터
│   │   ├── 서울대공원 입장객 정보_2024년 12월.xlsx     # 2024년 입장객 수 데이터
├── modeling/                      
│   ├── modeling.ipynb             # 모델 구현 코드
├── preprocessing/               
│   ├── preprocessing.ipynb        # 데이터 전처리 코드
├── README.md                      # 프로젝트 설명
```

## 📊 데이터 출처

| 데이터명 | 제공 기관 |
|----------|-----------|
| 서울어린이대공원 일일입장객수 | 서울시 |
| 기상청 종관기상관측(ASOS) 자료 | 기상청 |
| 기상청 황사관측 자료 | 기상청 |
| 공공 달력 | 교육부 |

## 🎯 프로젝트 과정  

### **1️⃣ 데이터 전처리**
- **데이터 수집 및 변수 가공**: 일 단위 관측값으로 정렬 및 병합
  - **입장객 수 데이터**: 해당 일자의 총 입장객 수(visitors_total)
  - **기상 데이터**: 최고기온(tmax), 최저기온(tmin), 평균 상대습도(humidity), 일강수량(rain), 일 최심적설(snow), 최대 풍속(wind)
  - **대기질 데이터**: 일별 미세먼지 농도(PM10, 변수명 air)
  - **학사일정 및 요일 정보**: 주말 여부(weekend)와 방학 여부(vacation)
- **변수 생성**: 모델 성능 향상을 위하여 시계열 특성이 반영된 파생 변수들도 함께 생성
  - 전일 방문객 수(lag_1), 7일 전 방문객 수(lag_7), 최근 7일간 이동 평균 방문객 수(rolling_7)
  - 요일(day_of_week), 월(month), 연도(year)
- **데이터 분할**
  - 학습 데이터: 2022년 1월 1일부터 2023년 12월 31일까지
  - 검증 데이터: 2024년 1월 1일부터 6월 30일까지
  - 테스트 데이터: 2024년 7월 1일부터 12월 31일까지
  
### **2️⃣ 베이스라인 모델**
- **Naïve 모델**: 𝑦̂ₜ = 𝑦ₜ₋₁
  - 직전 일자의 입장객 수를 그대로 다음 날의 예측값으로 사용하는 방식
- **Seasonal Naïve 모델**: 𝑦̂ₜ = 𝑦ₜ₋₇
  - 7일 전의 입장객 수를 그대로 예측값으로 활용하며, 입장객 수가 주간 단위로 반복되는 패턴을 보일 가능성을 고려한 방식

### **3️⃣ 머신러닝 모델**
- **Random Forest**
  - 다수의 결정 트리를 생성하여 각기 다른 데이터 샘플과 피처 조합에 대해 독립적으로 학습한 후, 그 예측 결과를 평균 내는 방식으로 작동하는 앙상블 학습 기법
- **XGBoost**
  - Gradient Boosting 방식의 대표적인 구현체로, 각 반복 단계에서 이전 모델의 예측 오차를 보완해가며 모델을 점진적으로 개선하는 부스팅 기법

(두 모델의 하이퍼파라미터 최적화에는 Optuna 프레임워크 사용) 

## 📈 프로젝트 결과
### **모델별 성능 비교**
| 모델 | RMSE	|	MAE	|	MAPE	|	R² |
|------|------|-----|-------|----|
| Naïve	|	6046.60 |	3185.57 |	186.44% |	-0.250 |
|Seasonal Naïve	|	5228.03	| 2656.84	| 118.21% |	0.089 |
| Random Forest	|	3410.50 |	1672.95 |	88.81% |	0.601 |
|XGBoost |	3387.67 |	1781.62 |	87.09% |	0.606 |

- **Naïve 및 Seasonal Naïve 모델**
  - 계절성과 외부 요인을 반영하지 못해 매우 낮은 예측 성능을 보임
  - R² 역시 0 또는 음수로 측정되어 기준선으로서의 역할만을 수행하는 데 그침
- **Random Forest와 XGBoost 모델**
  - 전반적으로 우수한 성능을 보였으며, 특히 XGBoost 모델은 가장 낮은 RMSE(3,387.67)와 가장 높은 R²(0.606)을 기록하여 본 연구의 최적 모델로 평가됨

### **Feature Importance**
<img width="731" height="362" alt="image" src="https://github.com/user-attachments/assets/05037ab6-53de-45aa-bd95-8dae6eed98ad" />
<img width="734" height="364" alt="image" src="https://github.com/user-attachments/assets/d9ce5cee-df30-4ae1-a7a0-e077f4471a31" />

- **변수 중요도 분석**을 통해 입장객 수 예측에 가장 큰 영향을 미치는 요인으로는 주말 여부와 최고기온이 확인되었으며, 이는 공원 운영 측면에서도 전략적으로 활용 가능한 통찰을 제공 가능


